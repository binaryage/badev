///
/// Base configuration for all TotalFinder projects
///

MACOSX_DEPLOYMENT_TARGET = 10.11
SDKROOT = macosx

// use modern C++ and stdlib
CLANG_CXX_LIBRARY = libc++
CLANG_CXX_LANGUAGE_STANDARD = c++17
CLANG_ENABLE_MODULES = YES
ENABLE_TESTABILITY = NO // this would expose some internal symbols

// some exotic warnings we want enabled (suggested by xcodeconf upgrade wizard)
CLANG_ANALYZER_LOCALIZABILITY_NONLOCALIZED = YES;
CLANG_WARN_BOOL_CONVERSION = YES;
CLANG_WARN_CONSTANT_CONVERSION = YES;
CLANG_WARN_EMPTY_BODY = YES;
CLANG_WARN_ENUM_CONVERSION = YES;
CLANG_WARN_INFINITE_RECURSION = YES;
CLANG_WARN_INT_CONVERSION = YES;
CLANG_WARN_SUSPICIOUS_MOVE = YES;
CLANG_WARN_UNREACHABLE_CODE = YES;
CLANG_WARN__DUPLICATE_METHOD_MATCH = YES;
GCC_NO_COMMON_BLOCKS = YES;
GCC_WARN_64_TO_32_BIT_CONVERSION = YES;
GCC_WARN_ABOUT_RETURN_TYPE = YES;
//GCC_WARN_UNDECLARED_SELECTOR = YES;
GCC_WARN_UNINITIALIZED_AUTOS = YES;
GCC_WARN_UNUSED_FUNCTION = YES;
GCC_WARN_UNUSED_VARIABLE = YES;

ENABLE_STRICT_OBJC_MSGSEND = YES;

COMBINE_HIDPI_IMAGES = YES

DEBUG_INFORMATION_FORMAT = dwarf-with-dsym

INFOPLIST_FILE = Info.plist

GCC_PREFIX_HEADER = <%= @target %>.pch

<% $shared['WARNING_CFLAGS'] << '-Wthread-safety' << '-Wthread-safety-beta' %>
<% $shared['OTHER_LDFLAGS'] << '-undefined dynamic_lookup' << '-headerpad_max_install_names' %>
